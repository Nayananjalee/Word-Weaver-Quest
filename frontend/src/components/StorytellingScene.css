/* ============================================
   ANGEL'S ENCHANTED STORY GARDEN
   A realistic, heavenly storytelling experience
   ============================================ */

/* === SCENE CONTAINER === */
.storytelling-scene {
  position: relative;
  width: 100%;
  height: 100%;
  overflow: hidden;
  border-radius: 24px;
  perspective: 1200px;
}

.realistic-scene {
  font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
}

/* === REALISTIC GOLDEN HOUR SKY === */
.scene-background.realistic-sky {
  position: absolute;
  inset: 0;
  background: linear-gradient(
    180deg,
    #87CEEB 0%,
    #a8d8ea 8%,
    #b4e4f7 16%,
    #ffecd2 35%,
    #fcb69f 50%,
    #ffeaa7 58%,
    #dfe6e9 65%,
    #a8d5a2 75%,
    #6db36b 85%,
    #4a8c4a 92%,
    #3d7a3d 100%
  );
  z-index: 0;
}

/* Atmospheric depth overlay */
.realistic-sky::after {
  content: '';
  position: absolute;
  inset: 0;
  background: 
    radial-gradient(ellipse at 75% 15%, rgba(255, 200, 100, 0.4) 0%, transparent 50%),
    radial-gradient(ellipse at 50% 100%, rgba(100, 160, 80, 0.3) 0%, transparent 40%);
  z-index: 1;
}

/* === REALISTIC SUN === */
.realistic-sun {
  position: absolute;
  top: 3%;
  right: 10%;
  z-index: 2;
}

.sun-core {
  width: 55px;
  height: 55px;
  background: radial-gradient(circle at 40% 40%, #fff8e1, #ffe082, #ffb74d);
  border-radius: 50%;
  box-shadow: 
    0 0 30px 10px rgba(255, 183, 77, 0.6),
    0 0 60px 25px rgba(255, 183, 77, 0.3),
    0 0 120px 50px rgba(255, 183, 77, 0.15);
  animation: sun-breathe 6s ease-in-out infinite alternate;
}

.sun-corona {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 120px;
  height: 120px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 200, 100, 0.2) 0%, transparent 70%);
  animation: corona-pulse 4s ease-in-out infinite alternate;
}

@keyframes sun-breathe {
  0% { box-shadow: 0 0 30px 10px rgba(255, 183, 77, 0.6), 0 0 60px 25px rgba(255, 183, 77, 0.3), 0 0 120px 50px rgba(255, 183, 77, 0.15); }
  100% { box-shadow: 0 0 40px 15px rgba(255, 183, 77, 0.7), 0 0 80px 35px rgba(255, 183, 77, 0.35), 0 0 150px 60px rgba(255, 183, 77, 0.2); }
}

@keyframes corona-pulse {
  0% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
  100% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; }
}

/* === GOD RAYS / SUN BEAMS === */
.sun-rays-container {
  position: absolute;
  top: 3%;
  right: 10%;
  width: 400px;
  height: 400px;
  z-index: 1;
  pointer-events: none;
  transform-origin: center top;
}

.sun-ray {
  position: absolute;
  top: 30px;
  left: 50%;
  width: 3px;
  height: 350px;
  background: linear-gradient(180deg, rgba(255, 215, 150, 0.3), rgba(255, 215, 150, 0.05), transparent);
  transform-origin: top center;
  animation: ray-shimmer 4s ease-in-out infinite alternate;
}

@keyframes ray-shimmer {
  0% { opacity: 0.3; width: 3px; }
  50% { opacity: 0.8; width: 6px; }
  100% { opacity: 0.3; width: 3px; }
}

/* === REALISTIC CLOUDS === */
.clouds-container {
  position: absolute;
  inset: 0;
  z-index: 3;
  pointer-events: none;
  overflow: hidden;
}

.realistic-cloud {
  position: absolute;
  animation: cloud-drift linear infinite;
  filter: blur(1px);
}

.cloud-puff {
  position: absolute;
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.95), rgba(240, 240, 255, 0.8));
  border-radius: 50%;
  box-shadow: 
    inset -4px -4px 8px rgba(200, 200, 220, 0.3),
    0 4px 12px rgba(0, 0, 0, 0.05);
}

.cloud-puff-1 {
  width: 60px;
  height: 35px;
  top: 5px;
  left: 0;
}

.cloud-puff-2 {
  width: 80px;
  height: 45px;
  top: -5px;
  left: 25px;
}

.cloud-puff-3 {
  width: 55px;
  height: 30px;
  top: 8px;
  left: 60px;
}

@keyframes cloud-drift {
  0% { transform: translateX(-120px); }
  100% { transform: translateX(calc(100vw + 120px)); }
}

/* === REALISTIC TREES === */
.realistic-trees {
  position: absolute;
  bottom: 22%;
  width: 100%;
  z-index: 5;
  pointer-events: none;
}

.realistic-tree {
  position: absolute;
  bottom: 0;
  animation: gentle-sway 8s ease-in-out infinite;
  transform-origin: bottom center;
}

@keyframes gentle-sway {
  0%, 100% { transform: rotate(-0.5deg); }
  50% { transform: rotate(0.5deg); }
}

.tree-canopy {
  position: relative;
  width: 90px;
  height: 80px;
}

.canopy-layer {
  position: absolute;
  border-radius: 50%;
}

.canopy-1 {
  width: 80px;
  height: 60px;
  background: radial-gradient(ellipse at 40% 40%, #5fa55f, #3d8b3d, #2d6b2d);
  bottom: 0;
  left: 5px;
  box-shadow: inset -8px -6px 15px rgba(0, 50, 0, 0.3), 0 4px 10px rgba(0, 0, 0, 0.1);
}

.canopy-2 {
  width: 65px;
  height: 55px;
  background: radial-gradient(ellipse at 45% 35%, #6db86d, #4a9a4a, #3a803a);
  bottom: 15px;
  left: 15px;
  box-shadow: inset -5px -4px 10px rgba(0, 50, 0, 0.25);
}

.canopy-3 {
  width: 45px;
  height: 40px;
  background: radial-gradient(ellipse at 50% 30%, #7ec87e, #5aaa5a);
  bottom: 30px;
  left: 22px;
}

.tree-sunlight-filter {
  position: absolute;
  top: 5px;
  right: 5px;
  width: 25px;
  height: 20px;
  background: radial-gradient(circle, rgba(255, 220, 100, 0.3), transparent);
  border-radius: 50%;
}

.tree-oak .canopy-1 { background: radial-gradient(ellipse at 40% 40%, #4a8c3f, #3a7030, #2a5520); }
.tree-willow .canopy-1 { background: radial-gradient(ellipse at 40% 40%, #7ab648, #5a9a38, #4a8030); border-radius: 40% 40% 60% 60%; }
.tree-birch .canopy-1 { background: radial-gradient(ellipse at 40% 40%, #8bc34a, #689f38, #558b2f); }
.tree-maple .canopy-1 { background: radial-gradient(ellipse at 40% 40%, #66bb6a, #43a047, #2e7d32); }

.realistic-trunk {
  width: 14px;
  height: 50px;
  margin: -5px auto 0;
  background: linear-gradient(90deg, #5d4037, #795548, #6d4c41, #5d4037);
  border-radius: 3px;
  position: relative;
  box-shadow: inset -3px 0 6px rgba(0, 0, 0, 0.2);
}

.trunk-detail {
  position: absolute;
  top: 5px;
  left: 3px;
  width: 4px;
  height: 30px;
  background: linear-gradient(180deg, transparent, rgba(0, 0, 0, 0.1), transparent);
  border-radius: 2px;
}

.trunk-roots {
  position: absolute;
  bottom: -5px;
  left: -5px;
  width: 24px;
  height: 10px;
  border-top: 3px solid #5d4037;
  border-radius: 0 0 8px 8px;
}

/* === REALISTIC MEADOW / GROUND === */
.scene-ground.realistic-meadow {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 32%;
  background: linear-gradient(
    180deg,
    #6db36b 0%,
    #5fa55f 15%,
    #4a8c4a 35%,
    #3d7a3d 55%,
    #357035 75%,
    #2d602d 100%
  );
  z-index: 3;
}

.meadow-grass-overlay {
  position: absolute;
  top: -3px;
  left: 0;
  width: 100%;
  height: 20px;
  background: linear-gradient(180deg, transparent, rgba(107, 179, 107, 0.8));
}

.grass-blades {
  position: absolute;
  top: -10px;
  left: 0;
  width: 100%;
  height: 20px;
  overflow: hidden;
}

.grass-blade {
  position: absolute;
  bottom: 0;
  width: 3px;
  background: linear-gradient(180deg, #7ec87e, #5fa55f);
  border-radius: 2px 2px 0 0;
  transform-origin: bottom center;
  animation: grass-wave 3s ease-in-out infinite;
}

@keyframes grass-wave {
  0%, 100% { transform: rotate(-3deg); }
  50% { transform: rotate(3deg); }
}

/* === MEADOW FLOWERS === */
.meadow-flowers {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 35%;
  z-index: 6;
  pointer-events: none;
}

.meadow-flower {
  position: absolute;
  animation: flower-sway 4s ease-in-out infinite;
  filter: drop-shadow(0 2px 3px rgba(0, 0, 0, 0.1));
}

@keyframes flower-sway {
  0%, 100% { transform: rotate(-3deg); }
  50% { transform: rotate(3deg); }
}

/* === BUTTERFLIES === */
.butterflies-container {
  position: absolute;
  inset: 0;
  z-index: 7;
  pointer-events: none;
  overflow: hidden;
}

.butterfly {
  position: absolute;
  font-size: 18px;
  animation: butterfly-flutter ease-in-out infinite;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

@keyframes butterfly-flutter {
  0% { transform: translate(0, 0) rotate(0deg) scale(1); }
  25% { transform: translate(30px, -20px) rotate(10deg) scale(1.1); }
  50% { transform: translate(-20px, -40px) rotate(-5deg) scale(0.9); }
  75% { transform: translate(15px, -15px) rotate(8deg) scale(1.05); }
  100% { transform: translate(0, 0) rotate(0deg) scale(1); }
}

/* =============================================================
   ANGEL CHARACTER - Realistic heavenly guardian angel
   ============================================================= */
.angel-container {
  position: absolute;
  bottom: 24%;
  left: 10%;
  z-index: 15;
  width: 160px;
  height: 220px;
  animation: angel-float 5s ease-in-out infinite;
}

@keyframes angel-float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-8px); }
}

/* Divine light rays behind angel */
.angel-divine-rays {
  position: absolute;
  top: -40px;
  left: 50%;
  transform: translateX(-50%);
  width: 200px;
  height: 260px;
  z-index: -1;
}

.divine-ray {
  position: absolute;
  top: 0;
  left: 50%;
  width: 4px;
  height: 220px;
  background: linear-gradient(180deg, rgba(255, 215, 0, 0.4), rgba(255, 215, 0, 0.05), transparent);
  transform-origin: top center;
  animation: divine-ray-shimmer 3s ease-in-out infinite alternate;
}

.divine-ray:nth-child(1) { transform: translateX(-50%) rotate(-20deg); animation-delay: 0s; }
.divine-ray:nth-child(2) { transform: translateX(-50%) rotate(-10deg); animation-delay: 0.5s; }
.divine-ray:nth-child(3) { transform: translateX(-50%) rotate(0deg); animation-delay: 1s; }
.divine-ray:nth-child(4) { transform: translateX(-50%) rotate(10deg); animation-delay: 1.5s; }
.divine-ray:nth-child(5) { transform: translateX(-50%) rotate(20deg); animation-delay: 2s; }

@keyframes divine-ray-shimmer {
  0% { opacity: 0.3; width: 3px; }
  100% { opacity: 0.7; width: 6px; }
}

/* Soft ambient glow around angel */
.angel-ambient-glow {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 200px;
  height: 250px;
  background: radial-gradient(ellipse, rgba(255, 215, 100, 0.25) 0%, rgba(255, 215, 100, 0.1) 40%, transparent 70%);
  border-radius: 50%;
  animation: glow-breathe 4s ease-in-out infinite alternate;
  z-index: -1;
}

@keyframes glow-breathe {
  0% { opacity: 0.5; transform: translateX(-50%) scale(0.95); }
  100% { opacity: 0.9; transform: translateX(-50%) scale(1.05); }
}

.angel-body {
  position: relative;
  width: 100%;
  height: 100%;
}

/* === ANGEL HALO === */
.angel-halo {
  position: absolute;
  top: -8px;
  left: 50%;
  transform: translateX(-50%) rotateX(60deg);
  width: 60px;
  height: 20px;
  border: 3px solid #ffd700;
  border-radius: 50%;
  background: transparent;
  box-shadow: 
    0 0 15px 5px rgba(255, 215, 0, 0.4),
    0 0 30px 10px rgba(255, 215, 0, 0.2),
    inset 0 0 10px rgba(255, 215, 0, 0.3);
  animation: halo-glow 3s ease-in-out infinite alternate;
  z-index: 20;
}

@keyframes halo-glow {
  0% { box-shadow: 0 0 15px 5px rgba(255, 215, 0, 0.4), 0 0 30px 10px rgba(255, 215, 0, 0.2); }
  100% { box-shadow: 0 0 20px 8px rgba(255, 215, 0, 0.6), 0 0 40px 15px rgba(255, 215, 0, 0.3); }
}

/* === ANGEL WINGS === */
.angel-wings {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 200px;
  height: 140px;
  z-index: 0;
}

.angel-wing {
  position: absolute;
  top: 0;
}

.wing-left {
  right: 50%;
  transform-origin: right center;
  animation: wing-left-breathe 4s ease-in-out infinite;
}

.wing-right {
  left: 50%;
  transform-origin: left center;
  animation: wing-right-breathe 4s ease-in-out infinite;
}

@keyframes wing-left-breathe {
  0%, 100% { transform: rotate(5deg) scaleX(1); }
  50% { transform: rotate(0deg) scaleX(1.05); }
}

@keyframes wing-right-breathe {
  0%, 100% { transform: rotate(-5deg) scaleX(1); }
  50% { transform: rotate(0deg) scaleX(1.05); }
}

.wing-feather {
  position: absolute;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(240, 240, 255, 0.85), rgba(220, 230, 255, 0.7));
  border-radius: 50% 50% 50% 0;
  box-shadow: 
    inset -2px -2px 6px rgba(180, 190, 220, 0.3),
    0 2px 8px rgba(255, 255, 255, 0.3);
}

/* Left wing feathers */
.wing-left .feather-1 { width: 40px; height: 90px; right: 0; top: 10px; transform: rotate(15deg); }
.wing-left .feather-2 { width: 35px; height: 80px; right: 15px; top: 5px; transform: rotate(25deg); }
.wing-left .feather-3 { width: 30px; height: 70px; right: 28px; top: 0; transform: rotate(35deg); }
.wing-left .feather-4 { width: 25px; height: 55px; right: 38px; top: 2px; transform: rotate(45deg); }
.wing-left .feather-5 { width: 20px; height: 40px; right: 45px; top: 8px; transform: rotate(55deg); }

/* Right wing feathers (mirrored) */
.wing-right .feather-1 { width: 40px; height: 90px; left: 0; top: 10px; transform: rotate(-15deg); border-radius: 50% 50% 0 50%; }
.wing-right .feather-2 { width: 35px; height: 80px; left: 15px; top: 5px; transform: rotate(-25deg); border-radius: 50% 50% 0 50%; }
.wing-right .feather-3 { width: 30px; height: 70px; left: 28px; top: 0; transform: rotate(-35deg); border-radius: 50% 50% 0 50%; }
.wing-right .feather-4 { width: 25px; height: 55px; left: 38px; top: 2px; transform: rotate(-45deg); border-radius: 50% 50% 0 50%; }
.wing-right .feather-5 { width: 20px; height: 40px; left: 45px; top: 8px; transform: rotate(-55deg); border-radius: 50% 50% 0 50%; }

/* === ANGEL HAIR === */
.angel-hair {
  position: absolute;
  top: 5px;
  left: 50%;
  transform: translateX(-50%);
  width: 65px;
  height: 50px;
  z-index: 3;
}

.hair-strand {
  position: absolute;
  border-radius: 50%;
}

.strand-back {
  width: 65px;
  height: 45px;
  background: linear-gradient(180deg, #f0d060, #daa520, #cd9b1d);
  top: -3px;
  left: 0;
  border-radius: 35px 35px 15px 15px;
  box-shadow: inset 0 5px 10px rgba(255, 220, 100, 0.4);
}

.strand-left {
  width: 22px;
  height: 55px;
  background: linear-gradient(180deg, #daa520, #cd9b1d, #b8860b);
  top: 15px;
  left: -3px;
  border-radius: 15px;
  animation: hair-wave 5s ease-in-out infinite;
}

.strand-right {
  width: 22px;
  height: 55px;
  background: linear-gradient(180deg, #daa520, #cd9b1d, #b8860b);
  top: 15px;
  right: -3px;
  border-radius: 15px;
  animation: hair-wave 5s ease-in-out infinite reverse;
}

@keyframes hair-wave {
  0%, 100% { transform: rotate(-2deg); }
  50% { transform: rotate(2deg); }
}

/* === ANGEL HEAD === */
.angel-head {
  position: absolute;
  top: 12px;
  left: 50%;
  transform: translateX(-50%);
  width: 55px;
  height: 58px;
  background: radial-gradient(ellipse at 45% 40%, #fce4c7, #f5d5b0, #e8c89e);
  border-radius: 50% 50% 45% 45%;
  z-index: 5;
  box-shadow: 
    inset -4px -4px 8px rgba(180, 140, 100, 0.15),
    0 3px 8px rgba(0, 0, 0, 0.08);
}

/* Angel eyes */
.angel-eyes {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 38px;
  display: flex;
  justify-content: space-between;
  z-index: 6;
}

.angel-eye {
  width: 12px;
  height: 12px;
  position: relative;
  animation: angel-blink 5s ease-in-out infinite;
}

@keyframes angel-blink {
  0%, 42%, 48%, 100% { transform: scaleY(1); }
  45% { transform: scaleY(0.1); }
}

.angel-iris {
  position: absolute;
  width: 10px;
  height: 10px;
  background: radial-gradient(circle at 40% 40%, #7eb8e0, #4a90d9, #3070b3);
  border-radius: 50%;
  top: 1px;
  left: 1px;
}

.angel-pupil {
  position: absolute;
  width: 5px;
  height: 5px;
  background: #1a1a2e;
  border-radius: 50%;
  top: 3px;
  left: 3px;
  z-index: 1;
}

.angel-eye-highlight {
  position: absolute;
  width: 3px;
  height: 3px;
  background: white;
  border-radius: 50%;
  top: 2px;
  left: 2px;
  z-index: 2;
}

.angel-eyelash {
  position: absolute;
  top: -2px;
  left: 0;
  width: 12px;
  height: 4px;
  border-top: 2px solid #8b7355;
  border-radius: 50% 50% 0 0;
}

/* Angel nose */
.angel-nose {
  position: absolute;
  top: 30px;
  left: 50%;
  transform: translateX(-50%);
  width: 6px;
  height: 8px;
  background: linear-gradient(180deg, transparent, rgba(180, 140, 100, 0.2));
  border-radius: 3px;
  z-index: 6;
}

/* Angel mouth */
.angel-mouth {
  position: absolute;
  top: 39px;
  left: 50%;
  transform: translateX(-50%);
  width: 16px;
  height: 7px;
  border-bottom: 2.5px solid #d4726a;
  border-radius: 0 0 50% 50%;
  z-index: 6;
  transition: all 0.2s ease;
}

.angel-mouth.speaking {
  animation: angel-speak 0.35s ease-in-out infinite alternate;
}

@keyframes angel-speak {
  0% { height: 4px; width: 12px; border-radius: 0 0 50% 50%; }
  50% { height: 9px; width: 14px; border-radius: 50%; }
  100% { height: 6px; width: 10px; border-radius: 0 0 50% 50%; }
}

/* Angel cheeks - rosy glow */
.angel-cheek {
  position: absolute;
  width: 10px;
  height: 7px;
  background: radial-gradient(circle, rgba(255, 150, 150, 0.4), transparent);
  border-radius: 50%;
  top: 33px;
  z-index: 6;
}

.angel-cheek.left-cheek { left: 5px; }
.angel-cheek.right-cheek { right: 5px; }

/* Angel neck */
.angel-neck {
  position: absolute;
  top: 65px;
  left: 50%;
  transform: translateX(-50%);
  width: 16px;
  height: 12px;
  background: linear-gradient(180deg, #f5d5b0, #e8c89e);
  z-index: 2;
}

/* === ANGEL ROBE === */
.angel-robe {
  position: absolute;
  top: 72px;
  left: 50%;
  transform: translateX(-50%);
  width: 90px;
  height: 130px;
  background: linear-gradient(
    180deg,
    rgba(255, 255, 255, 0.97) 0%,
    rgba(245, 245, 255, 0.95) 30%,
    rgba(235, 235, 250, 0.9) 60%,
    rgba(220, 225, 245, 0.85) 100%
  );
  border-radius: 25px 25px 45px 45px;
  z-index: 2;
  box-shadow: 
    inset -6px 0 12px rgba(180, 190, 220, 0.2),
    inset 4px 0 8px rgba(255, 255, 255, 0.5),
    0 8px 20px rgba(0, 0, 0, 0.08);
  overflow: hidden;
}

.robe-fold {
  position: absolute;
  background: linear-gradient(180deg, transparent, rgba(180, 190, 220, 0.12), transparent);
  border-radius: 50%;
}

.fold-1 { width: 15px; height: 80px; top: 20px; left: 15px; transform: rotate(-5deg); }
.fold-2 { width: 12px; height: 70px; top: 30px; left: 40px; transform: rotate(3deg); }
.fold-3 { width: 10px; height: 60px; top: 40px; right: 15px; transform: rotate(-2deg); }

.angel-sash {
  position: absolute;
  top: 15px;
  left: 10px;
  right: 10px;
  height: 8px;
  background: linear-gradient(90deg, transparent, rgba(255, 215, 0, 0.5), rgba(255, 215, 0, 0.7), rgba(255, 215, 0, 0.5), transparent);
  border-radius: 4px;
}

/* Angel hands */
.angel-hand {
  position: absolute;
  width: 18px;
  height: 18px;
  background: radial-gradient(circle at 40% 35%, #fce4c7, #f0d0a8);
  border-radius: 50%;
  z-index: 4;
}

.angel-hand.left-hand {
  top: 105px;
  left: 10px;
  animation: hand-gesture-l 4s ease-in-out infinite;
}

.angel-hand.right-hand {
  top: 100px;
  right: 10px;
  animation: hand-gesture-r 4s ease-in-out infinite;
}

@keyframes hand-gesture-l {
  0%, 100% { transform: rotate(0deg) translateY(0); }
  50% { transform: rotate(-8deg) translateY(-5px); }
}

@keyframes hand-gesture-r {
  0%, 100% { transform: rotate(0deg) translateY(0); }
  50% { transform: rotate(8deg) translateY(-5px); }
}

.hand-glow {
  position: absolute;
  inset: -5px;
  background: radial-gradient(circle, rgba(255, 215, 100, 0.3), transparent);
  border-radius: 50%;
}

/* Angel's magical story book */
.angel-book {
  position: absolute;
  top: -5px;
  right: -12px;
  width: 25px;
  height: 20px;
  background: linear-gradient(135deg, #8b4513, #a0522d);
  border-radius: 2px 4px 4px 2px;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
  transform: rotate(-10deg);
}

.book-pages {
  position: absolute;
  top: 2px;
  right: 2px;
  width: 20px;
  height: 16px;
  background: linear-gradient(90deg, #f5f0e0, #fff8e7, #f5f0e0);
  border-radius: 1px 3px 3px 1px;
}

.book-glow {
  position: absolute;
  inset: -4px;
  background: radial-gradient(circle, rgba(255, 215, 100, 0.4), transparent);
  border-radius: 6px;
  animation: book-shimmer 2s ease-in-out infinite alternate;
}

@keyframes book-shimmer {
  0% { opacity: 0.4; }
  100% { opacity: 0.8; }
}

/* Angel speaking particles */
.angel-speaking-particles {
  position: absolute;
  top: 30px;
  left: 50%;
  transform: translateX(-50%);
  width: 80px;
  height: 40px;
  z-index: 25;
}

.angel-particle {
  position: absolute;
  width: 4px;
  height: 4px;
  background: #ffd700;
  border-radius: 50%;
  box-shadow: 0 0 6px rgba(255, 215, 0, 0.6);
  animation: particle-float 1.5s ease-out infinite;
}

.angel-particle:nth-child(1) { left: 10%; animation-delay: 0s; }
.angel-particle:nth-child(2) { left: 30%; animation-delay: 0.2s; }
.angel-particle:nth-child(3) { left: 50%; animation-delay: 0.4s; }
.angel-particle:nth-child(4) { left: 70%; animation-delay: 0.6s; }
.angel-particle:nth-child(5) { left: 90%; animation-delay: 0.8s; }

@keyframes particle-float {
  0% { opacity: 1; transform: translateY(0) scale(1); }
  100% { opacity: 0; transform: translateY(-30px) scale(0.3); }
}

/* Angel sparkles */
.angel-sparkles {
  position: absolute;
  inset: -20px;
  pointer-events: none;
  z-index: 1;
}

.angel-sparkle {
  position: absolute;
  color: #ffd700;
  font-size: 12px;
  animation: sparkle-twinkle 2.5s ease-in-out infinite;
  text-shadow: 0 0 8px rgba(255, 215, 0, 0.5);
}

@keyframes sparkle-twinkle {
  0%, 100% { opacity: 0.3; transform: scale(0.8); }
  50% { opacity: 1; transform: scale(1.3); }
}


/* =============================================================
   REALISTIC CHILDREN
   ============================================================= */
.realistic-children-container {
  position: absolute;
  bottom: 22%;
  right: 8%;
  z-index: 12;
}

.children-sitting-area {
  position: absolute;
  bottom: -15px;
  left: -10px;
  right: -10px;
}

.sitting-bench {
  position: relative;
  width: 160px;
  height: 25px;
  margin: 0 auto;
}

.bench-top {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 8px;
  background: linear-gradient(90deg, #8b6914, #a07828, #8b6914);
  border-radius: 4px;
  box-shadow: inset 0 -2px 4px rgba(0, 0, 0, 0.15), 0 2px 6px rgba(0, 0, 0, 0.1);
}

.bench-leg {
  position: absolute;
  width: 6px;
  height: 18px;
  background: linear-gradient(90deg, #7a5c10, #8b6914);
  top: 6px;
  border-radius: 0 0 2px 2px;
}

.bench-leg-left { left: 10px; }
.bench-leg-right { right: 10px; }

.children-row {
  display: flex;
  gap: 12px;
  align-items: flex-end;
  position: relative;
  z-index: 2;
}

.realistic-child {
  position: relative;
  animation: child-gentle-bob 3.5s ease-in-out infinite;
}

.realistic-child:nth-child(2) { animation-delay: 0.5s; }
.realistic-child:nth-child(3) { animation-delay: 1s; }

@keyframes child-gentle-bob {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

.child-figure {
  position: relative;
  width: 42px;
}

/* Child hair */
.realistic-child-hair {
  position: absolute;
  top: -5px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 3;
}

.realistic-hair-1 {
  width: 42px;
  height: 22px;
  border-radius: 20px 20px 5px 5px;
}

.realistic-hair-2 {
  width: 40px;
  height: 18px;
  border-radius: 12px 12px 5px 5px;
}

.realistic-hair-3 {
  width: 44px;
  height: 24px;
  border-radius: 22px 22px 8px 8px;
}

.dark-brown { background: linear-gradient(180deg, #4a2c0a, #3a200a, #2e1a08); }
.black { background: linear-gradient(180deg, #1a1a1a, #0f0f0f, #050505); }
.light-brown { background: linear-gradient(180deg, #8b6914, #6d4e12, #5a3d0e); }

.hair-bow {
  position: absolute;
  top: 2px;
  right: -2px;
  width: 12px;
  height: 8px;
  background: #e91e63;
  border-radius: 4px;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.hair-cap {
  position: absolute;
  top: -4px;
  left: 50%;
  transform: translateX(-50%);
  width: 38px;
  height: 10px;
  background: linear-gradient(180deg, #2196f3, #1976d2);
  border-radius: 8px 8px 0 0;
}

.hair-band {
  position: absolute;
  top: 1px;
  left: 50%;
  transform: translateX(-50%);
  width: 44px;
  height: 4px;
  background: #ff9800;
  border-radius: 2px;
}

/* Child head - realistic */
.realistic-child-head {
  width: 38px;
  height: 40px;
  border-radius: 50% 50% 42% 42%;
  position: relative;
  margin: 0 auto;
  box-shadow: inset -3px -3px 6px rgba(0, 0, 0, 0.08);
}

.realistic-skin-1 { background: radial-gradient(ellipse at 45% 40%, #fce4c7, #f5d5b0, #e8c89e); }
.realistic-skin-2 { background: radial-gradient(ellipse at 45% 40%, #d4a574, #c48c5c, #b07848); }
.realistic-skin-3 { background: radial-gradient(ellipse at 45% 40%, #f5deb3, #edd5a0, #dfc890); }

.head-shadow {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 12px;
  background: linear-gradient(180deg, rgba(0, 0, 0, 0.05), transparent);
  border-radius: 50% 50% 0 0;
}

/* Child eyebrows */
.child-eyebrows {
  position: absolute;
  top: 10px;
  left: 50%;
  transform: translateX(-50%);
  width: 28px;
  display: flex;
  justify-content: space-between;
  z-index: 1;
}

.child-eyebrow {
  width: 8px;
  height: 2px;
  background: #5a4030;
  border-radius: 2px;
  transition: transform 0.3s ease;
}

.brow-raised { transform: translateY(-2px) rotate(-5deg); }

/* Child eyes - realistic */
.realistic-child-eyes {
  position: absolute;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  width: 26px;
  display: flex;
  justify-content: space-between;
  z-index: 1;
}

.realistic-child-eye {
  width: 9px;
  height: 9px;
  position: relative;
  animation: child-realistic-blink 4.5s ease-in-out infinite;
}

.eye-white {
  position: absolute;
  inset: 0;
  background: white;
  border-radius: 50%;
  box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

.eye-iris {
  position: absolute;
  width: 6px;
  height: 6px;
  background: radial-gradient(circle at 40% 40%, #6b4c32, #4a3020);
  border-radius: 50%;
  top: 2px;
  left: 2px;
  animation: child-look-angel 5s ease-in-out infinite;
}

.eye-pupil {
  position: absolute;
  width: 3px;
  height: 3px;
  background: #111;
  border-radius: 50%;
  top: 3px;
  left: 3px;
  z-index: 1;
}

.eye-shine {
  position: absolute;
  width: 2px;
  height: 2px;
  background: white;
  border-radius: 50%;
  top: 2px;
  left: 2px;
  z-index: 2;
}

.eyelid {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 0;
  border-radius: 50% 50% 0 0;
  z-index: 3;
}

@keyframes child-realistic-blink {
  0%, 42%, 48%, 100% { transform: scaleY(1); }
  45% { transform: scaleY(0.1); }
}

@keyframes child-look-angel {
  0%, 60%, 100% { transform: translateX(0); }
  30% { transform: translateX(-1px) translateY(-1px); }
}

/* Child nose */
.child-nose-realistic {
  position: absolute;
  top: 22px;
  left: 50%;
  transform: translateX(-50%);
  width: 4px;
  height: 5px;
  background: linear-gradient(180deg, transparent, rgba(0, 0, 0, 0.06));
  border-radius: 2px;
}

/* Child mouth */
.realistic-child-mouth {
  position: absolute;
  bottom: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: 10px;
  height: 4px;
  border-bottom: 2px solid #c0756a;
  border-radius: 0 0 50% 50%;
  transition: all 0.3s ease;
}

.mouth-smile {
  width: 14px;
  height: 7px;
  border-width: 2.5px;
}

.mouth-sad {
  border-bottom: none;
  border-top: 2px solid #c0756a;
  border-radius: 50% 50% 0 0;
}

/* Child cheeks */
.child-cheek {
  position: absolute;
  width: 8px;
  height: 5px;
  background: radial-gradient(circle, rgba(255, 150, 150, 0.2), transparent);
  border-radius: 50%;
  top: 25px;
  transition: all 0.3s ease;
}

.child-cheek.left { left: 3px; }
.child-cheek.right { right: 3px; }
.cheek-flush { background: radial-gradient(circle, rgba(255, 120, 120, 0.5), transparent); }

/* Child ears */
.child-ear {
  position: absolute;
  width: 7px;
  height: 10px;
  border-radius: 50%;
  top: 14px;
}

.child-ear.left-ear { left: -3px; }
.child-ear.right-ear { right: -3px; }

/* Child neck */
.child-neck {
  width: 10px;
  height: 6px;
  margin: 0 auto;
}

/* Child body / outfit */
.realistic-child-body {
  width: 32px;
  height: 38px;
  border-radius: 10px 10px 6px 6px;
  margin: -1px auto 0;
  position: relative;
  overflow: hidden;
}

.outfit-1 { background: linear-gradient(180deg, #e91e63, #c2185b); }
.outfit-2 { background: linear-gradient(180deg, #2196f3, #1565c0); }
.outfit-3 { background: linear-gradient(180deg, #4caf50, #2e7d32); }

.outfit-detail {
  position: absolute;
  top: 8px;
  left: 50%;
  transform: translateX(-50%);
  width: 6px;
  height: 6px;
  background: rgba(255, 255, 255, 0.3);
  border-radius: 50%;
}

.outfit-collar {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  width: 18px;
  height: 5px;
  background: rgba(255, 255, 255, 0.25);
  border-radius: 0 0 8px 8px;
}

/* Child arms */
.child-arm {
  position: absolute;
  width: 8px;
  height: 25px;
  border-radius: 4px;
  top: 50px;
  transition: all 0.3s ease;
}

.child-arm.left-arm { left: 0; transform: rotate(5deg); }
.child-arm.right-arm { right: 0; transform: rotate(-5deg); }

.arm-raised { transform: rotate(-40deg) translateY(-8px) !important; }

.child-hand-realistic {
  position: absolute;
  bottom: -4px;
  left: 50%;
  transform: translateX(-50%);
  width: 8px;
  height: 8px;
  border-radius: 50%;
}

/* Child legs */
.child-legs {
  display: flex;
  gap: 3px;
  justify-content: center;
  margin-top: -1px;
}

.child-leg {
  width: 10px;
  height: 18px;
  border-radius: 4px;
}

.outfit-1-leg { background: linear-gradient(180deg, #5d4037, #4e342e); }
.outfit-2-leg { background: linear-gradient(180deg, #455a64, #37474f); }
.outfit-3-leg { background: linear-gradient(180deg, #5d4037, #4e342e); }

/* Child shoes */
.child-shoes {
  display: flex;
  gap: 5px;
  justify-content: center;
  margin-top: -1px;
}

.child-shoe {
  width: 12px;
  height: 6px;
  background: linear-gradient(180deg, #333, #1a1a1a);
  border-radius: 4px 4px 6px 6px;
}

/* Child thought bubbles */
.realistic-thought-bubble {
  position: absolute;
  top: -45px;
  left: 50%;
  transform: translateX(-50%);
  z-index: 20;
  animation: thought-appear 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.thought-emoji {
  font-size: 22px;
  display: block;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.15));
}

.thought-dots {
  position: absolute;
  bottom: -8px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  gap: 3px;
}

.thought-dot {
  width: 4px;
  height: 4px;
  background: rgba(255, 255, 255, 0.7);
  border-radius: 50%;
}

.thought-dot:last-child {
  width: 3px;
  height: 3px;
}

@keyframes thought-appear {
  0% { transform: translateX(-50%) scale(0); }
  100% { transform: translateX(-50%) scale(1); }
}

.child-excited {
  animation: child-jump 0.6s ease-in-out infinite alternate !important;
}

@keyframes child-jump {
  0% { transform: translateY(0); }
  100% { transform: translateY(-8px); }
}


/* =============================================================
   GOLDEN PARTICLES / DIVINE ATMOSPHERE
   ============================================================= */
.golden-orbs-container {
  position: absolute;
  inset: 0;
  z-index: 8;
  pointer-events: none;
  overflow: hidden;
}

.golden-orb {
  position: absolute;
  background: radial-gradient(circle, rgba(255, 215, 0, 0.8), rgba(255, 183, 77, 0.5), transparent);
  border-radius: 50%;
  box-shadow: 0 0 8px 3px rgba(255, 215, 0, 0.3);
  animation: golden-float var(--duration) ease-in-out infinite alternate;
  opacity: 0;
}

@keyframes golden-float {
  0% { opacity: 0; transform: translate(0, 0) scale(0.5); }
  20% { opacity: 0.8; }
  50% { transform: translate(var(--drift-x), var(--drift-y)) scale(1); }
  80% { opacity: 0.8; }
  100% { opacity: 0; transform: translate(calc(var(--drift-x) * -0.5), calc(var(--drift-y) * 1.2)) scale(0.5); }
}

/* Floating petals */
.petals-container {
  position: absolute;
  inset: 0;
  z-index: 7;
  pointer-events: none;
  overflow: hidden;
}

.floating-petal {
  position: absolute;
  top: -10px;
  border-radius: 50% 0 50% 0;
  opacity: 0.7;
  animation: petal-fall linear infinite;
  transform: rotate(45deg);
}

@keyframes petal-fall {
  0% { opacity: 0; transform: translateY(-20px) translateX(0) rotate(0deg); }
  10% { opacity: 0.7; }
  90% { opacity: 0.7; }
  100% { opacity: 0; transform: translateY(calc(100vh + 20px)) translateX(var(--petal-drift)) rotate(720deg); }
}

/* Divine sparkle dust */
.divine-dust {
  position: absolute;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.9), rgba(255, 215, 0, 0.4));
  border-radius: 50%;
  box-shadow: 0 0 4px 1px rgba(255, 255, 255, 0.5);
  animation: dust-sparkle 3s ease-in-out infinite;
  pointer-events: none;
  z-index: 8;
}

@keyframes dust-sparkle {
  0%, 100% { opacity: 0; transform: scale(0.5); }
  50% { opacity: 0.8; transform: scale(1.2); }
}


/* =============================================================
   SPEECH BUBBLE - Realistic glass-morphism
   ============================================================= */
.story-bubble-container {
  position: absolute;
  top: 5%;
  left: 30%;
  right: 5%;
  z-index: 20;
  animation: bubble-float-in 0.8s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.gesture-camera-panel ~ .story-bubble-container {
  left: 32%;
}

@keyframes bubble-float-in {
  0% { opacity: 0; transform: scale(0.3) translateY(50px); }
  60% { transform: scale(1.05) translateY(-5px); }
  100% { opacity: 1; transform: scale(1) translateY(0); }
}

.story-speech-bubble {
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.92), rgba(255, 248, 230, 0.92));
  border-radius: 25px;
  padding: 16px 20px;
  position: relative;
  box-shadow: 
    0 8px 32px rgba(0, 0, 0, 0.12),
    0 0 0 2px rgba(255, 215, 0, 0.3),
    0 0 20px rgba(255, 215, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(12px);
  max-height: 45vh;
  overflow-y: auto;
}

.story-speech-bubble::before {
  content: '';
  position: absolute;
  bottom: -15px;
  left: 10%;
  width: 0;
  height: 0;
  border-left: 15px solid transparent;
  border-right: 15px solid transparent;
  border-top: 18px solid rgba(255, 255, 255, 0.92);
  filter: drop-shadow(0 4px 4px rgba(0, 0, 0, 0.08));
}

.story-speech-bubble::after {
  content: '';
  position: absolute;
  bottom: -12px;
  left: 10%;
  width: 0;
  height: 0;
  border-left: 12px solid transparent;
  border-right: 12px solid transparent;
  border-top: 15px solid rgba(255, 248, 230, 0.92);
}

.bubble-sparkle {
  position: absolute;
  font-size: 14px;
  animation: sparkle-float 3s ease-in-out infinite;
  pointer-events: none;
}

@keyframes sparkle-float {
  0%, 100% { opacity: 0.6; transform: translateY(0) scale(1); }
  50% { opacity: 1; transform: translateY(-5px) scale(1.2); }
}

.bubble-story-text {
  font-size: 1.15rem;
  line-height: 1.7;
  color: #2c1810;
  font-weight: 500;
  text-align: center;
  position: relative;
  z-index: 1;
}

.bubble-story-text .highlight-word {
  display: inline-block;
  background: linear-gradient(135deg, #ff8f00, #ffa000);
  color: white;
  padding: 2px 10px;
  border-radius: 12px;
  font-weight: 700;
  animation: word-glow 2s ease-in-out infinite alternate;
  box-shadow: 0 2px 8px rgba(255, 143, 0, 0.3);
}

@keyframes word-glow {
  0% { box-shadow: 0 2px 8px rgba(255, 143, 0, 0.3); }
  100% { box-shadow: 0 4px 16px rgba(255, 143, 0, 0.6), 0 0 20px rgba(255, 143, 0, 0.2); }
}

.bubble-story-text .blank-space {
  display: inline-block;
  min-width: 80px;
  height: 30px;
  border-bottom: 3px dashed #ff8f00;
  margin: 0 4px;
  animation: blank-pulse 1.5s ease-in-out infinite;
  vertical-align: bottom;
}

@keyframes blank-pulse {
  0%, 100% { border-color: #ff8f00; }
  50% { border-color: #ffd54f; }
}


/* =============================================================
   ANSWER OPTIONS - Realistic card style
   ============================================================= */
.answer-options-container {
  position: absolute;
  bottom: 2%;
  left: 5%;
  right: 5%;
  z-index: 25;
  display: flex;
  gap: 10px;
  justify-content: center;
  animation: options-slide-up 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes options-slide-up {
  0% { opacity: 0; transform: translateY(60px); }
  100% { opacity: 1; transform: translateY(0); }
}

.answer-option-card {
  flex: 1;
  max-width: 180px;
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 248, 230, 0.95));
  border-radius: 20px;
  padding: 12px 8px;
  text-align: center;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  border: 3px solid rgba(255, 183, 77, 0.3);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.12);
  position: relative;
  overflow: hidden;
}

.answer-option-card::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.3), transparent);
  opacity: 0;
  transition: opacity 0.3s;
}

.answer-option-card:hover {
  transform: translateY(-8px) scale(1.05);
  border-color: #ffb74d;
  box-shadow: 0 8px 30px rgba(255, 183, 77, 0.3), 0 0 20px rgba(255, 215, 0, 0.1);
}

.answer-option-card:hover::before { opacity: 1; }
.answer-option-card:active { transform: translateY(-2px) scale(0.98); }

.answer-option-card.correct {
  background: linear-gradient(135deg, #a5d6a7, #66bb6a) !important;
  border-color: #2e7d32 !important;
  animation: correct-bounce 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  box-shadow: 0 0 30px rgba(76, 175, 80, 0.5);
}

.answer-option-card.incorrect {
  background: linear-gradient(135deg, #ef9a9a, #ef5350) !important;
  border-color: #c62828 !important;
  animation: wrong-shake 0.5s ease-in-out;
}

.answer-option-card.revealed { opacity: 0.5; pointer-events: none; }

@keyframes correct-bounce {
  0% { transform: scale(1); }
  30% { transform: scale(1.15); }
  60% { transform: scale(0.95); }
  100% { transform: scale(1.05); }
}

@keyframes wrong-shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-8px) rotate(-2deg); }
  40% { transform: translateX(8px) rotate(2deg); }
  60% { transform: translateX(-5px) rotate(-1deg); }
  80% { transform: translateX(5px) rotate(1deg); }
}

.option-number {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: linear-gradient(135deg, #ffa726, #ff9800);
  color: white;
  border-radius: 50%;
  font-weight: 700;
  font-size: 14px;
  margin-bottom: 6px;
  box-shadow: 0 2px 8px rgba(255, 152, 0, 0.3);
}

.option-text { font-size: 1rem; font-weight: 600; color: #2c1810; line-height: 1.3; }

.option-progress-ring { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); pointer-events: none; }
.option-progress-bg { position: absolute; inset: 0; background: rgba(255, 183, 77, 0.1); border-radius: 20px; overflow: hidden; }
.option-progress-fill { position: absolute; bottom: 0; left: 0; width: 100%; background: linear-gradient(0deg, rgba(255, 183, 77, 0.3), rgba(255, 215, 0, 0.2)); transition: height 0.1s linear; border-radius: 0 0 20px 20px; }


/* =============================================================
   CELEBRATION EFFECTS
   ============================================================= */
.celebration-container { position: absolute; inset: 0; z-index: 50; pointer-events: none; overflow: hidden; }

.celebration-star {
  position: absolute;
  font-size: 2rem;
  animation: celebration-star-fly 1.5s ease-out forwards;
}

@keyframes celebration-star-fly {
  0% { opacity: 1; transform: translate(0, 0) scale(0) rotate(0deg); }
  50% { opacity: 1; transform: translate(var(--fly-x), var(--fly-y)) scale(1.2) rotate(180deg); }
  100% { opacity: 0; transform: translate(calc(var(--fly-x) * 1.5), calc(var(--fly-y) * 1.5)) scale(0.5) rotate(360deg); }
}

.floating-heart { position: absolute; font-size: 1.5rem; animation: heart-float 2s ease-out forwards; pointer-events: none; }

@keyframes heart-float {
  0% { opacity: 1; transform: translateY(0) scale(0); }
  30% { transform: translateY(-20px) scale(1.2); }
  100% { opacity: 0; transform: translateY(-100px) scale(0.5); }
}

.rainbow-arc {
  position: absolute;
  top: 10%;
  left: 50%;
  transform: translateX(-50%);
  width: 250px;
  height: 125px;
  border-radius: 250px 250px 0 0;
  border: 8px solid transparent;
  border-bottom: none;
  background-image: linear-gradient(to right, transparent, transparent),
    linear-gradient(to right, #ff0000, #ff7700, #ffff00, #00ff00, #0000ff, #8b00ff);
  background-origin: border-box;
  background-clip: padding-box, border-box;
  animation: rainbow-appear 1s ease-out forwards;
  opacity: 0;
  z-index: 45;
}

@keyframes rainbow-appear {
  0% { opacity: 0; transform: translateX(-50%) scale(0.3); }
  60% { opacity: 0.8; }
  100% { opacity: 0.6; transform: translateX(-50%) scale(1); }
}


/* =============================================================
   LISTEN BUTTON - Heavenly golden style
   ============================================================= */
.magical-listen-btn {
  background: linear-gradient(135deg, #ffa726, #ff9800, #f57c00);
  color: white;
  border: none;
  padding: 16px 32px;
  border-radius: 50px;
  font-size: 1.2rem;
  font-weight: 700;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
  z-index: 30;
}

.magical-listen-btn:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 25px rgba(255, 152, 0, 0.5); }
.magical-listen-btn:active { transform: translateY(-1px) scale(0.98); }

.magical-listen-btn .btn-shine {
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
  animation: btn-shine-move 3s infinite;
}

@keyframes btn-shine-move { 0% { left: -100%; } 100% { left: 200%; } }

.sound-wave { position: absolute; border: 2px solid rgba(255, 183, 77, 0.4); border-radius: 50%; animation: sound-wave-expand 1.5s ease-out infinite; }
@keyframes sound-wave-expand { 0% { width: 50px; height: 50px; opacity: 1; } 100% { width: 150px; height: 150px; opacity: 0; } }


/* =============================================================
   PROGRESS BAR & COUNTERS
   ============================================================= */
.story-progress-bar { position: absolute; top: 0; left: 0; right: 0; height: 6px; background: rgba(0, 0, 0, 0.08); z-index: 30; border-radius: 0 0 3px 3px; overflow: hidden; }

.story-progress-fill {
  height: 100%;
  background: linear-gradient(90deg, #ffd54f, #ff9800, #ff5722, #e91e63, #9c27b0);
  background-size: 300% 100%;
  animation: progress-rainbow 3s linear infinite;
  transition: width 0.5s ease-out;
  border-radius: 0 3px 3px 0;
  box-shadow: 0 0 10px rgba(255, 152, 0, 0.5);
}

@keyframes progress-rainbow { 0% { background-position: 0% 0%; } 100% { background-position: 300% 0%; } }

.stars-counter {
  position: absolute; top: 12px; right: 12px; z-index: 30;
  display: flex; align-items: center; gap: 6px;
  background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px);
  padding: 6px 14px; border-radius: 20px;
  border: 2px solid rgba(255, 183, 77, 0.5);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.stars-counter-icon { font-size: 1.2rem; animation: star-rotate 3s linear infinite; }
@keyframes star-rotate { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

.stars-counter-text { color: #e65100; font-weight: 700; font-size: 0.95rem; }

.sentence-counter {
  position: absolute; top: 12px; left: 12px; z-index: 30;
  display: flex; align-items: center; gap: 6px;
  background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px);
  padding: 6px 14px; border-radius: 20px;
  border: 2px solid rgba(0, 0, 0, 0.08);
  color: #3e2723; font-weight: 600; font-size: 0.85rem;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}


/* =============================================================
   FINAL REWARD SCENE
   ============================================================= */
.final-reward-scene {
  position: absolute; inset: 0;
  display: flex; flex-direction: column; align-items: center; justify-content: center;
  z-index: 40;
  background: radial-gradient(circle at center, rgba(255, 215, 0, 0.2), transparent);
}

.reward-trophy { font-size: 5rem; animation: trophy-bounce 1s cubic-bezier(0.68, -0.55, 0.265, 1.55) forwards; filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5)); }
@keyframes trophy-bounce { 0% { transform: scale(0) rotate(-30deg); opacity: 0; } 60% { transform: scale(1.2) rotate(5deg); } 100% { transform: scale(1) rotate(0deg); opacity: 1; } }

.reward-message { color: #3e2723; font-size: 1.8rem; font-weight: 700; text-align: center; margin: 16px 0; text-shadow: 0 1px 8px rgba(255, 215, 0, 0.3); animation: message-fade-in 0.8s ease-out 0.3s both; }
@keyframes message-fade-in { 0% { opacity: 0; transform: translateY(20px); } 100% { opacity: 1; transform: translateY(0); } }

.reward-stars-display { display: flex; gap: 8px; margin: 12px 0; animation: stars-cascade 0.8s ease-out 0.5s both; }
@keyframes stars-cascade { 0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); } }

.reward-star { font-size: 2.5rem; animation: reward-star-spin 1s ease-out forwards; animation-delay: var(--delay); opacity: 0; }
@keyframes reward-star-spin { 0% { opacity: 0; transform: scale(0) rotate(0deg); } 60% { transform: scale(1.3) rotate(360deg); } 100% { opacity: 1; transform: scale(1) rotate(720deg); } }

.reward-score-text { color: #e65100; font-size: 2.5rem; font-weight: 800; text-shadow: 0 0 15px rgba(255, 152, 0, 0.4); animation: score-count-up 0.8s ease-out 0.8s both; }
@keyframes score-count-up { 0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1); } }

.reward-percentage { color: rgba(62, 39, 35, 0.7); font-size: 1.2rem; margin-top: 4px; animation: message-fade-in 0.8s ease-out 1s both; }

.reward-finish-btn {
  margin-top: 20px;
  background: linear-gradient(135deg, #66bb6a, #43a047);
  color: white; border: none;
  padding: 14px 40px; border-radius: 50px;
  font-size: 1.3rem; font-weight: 700;
  cursor: pointer; transition: all 0.3s ease;
  box-shadow: 0 4px 20px rgba(76, 175, 80, 0.4);
  animation: message-fade-in 0.8s ease-out 1.2s both;
}

.reward-finish-btn:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 30px rgba(76, 175, 80, 0.5); }


/* =============================================================
   QUESTION PHASE & FEEDBACK
   ============================================================= */
.question-phase-overlay { position: absolute; inset: 0; background: rgba(255, 248, 230, 0.15); z-index: 22; animation: overlay-fade 0.3s ease-out; }
@keyframes overlay-fade { 0% { opacity: 0; } 100% { opacity: 1; } }

.question-text {
  position: absolute; top: 8%; left: 50%; transform: translateX(-50%);
  background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(255, 248, 230, 0.95));
  padding: 12px 24px; border-radius: 20px;
  font-size: 1.1rem; font-weight: 700; color: #e65100; text-align: center;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.12); z-index: 25; white-space: nowrap;
  animation: question-drop 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes question-drop { 0% { opacity: 0; transform: translateX(-50%) translateY(-30px) scale(0.8); } 100% { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); } }

.feedback-toast { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 55; text-align: center; animation: toast-appear 0.5s cubic-bezier(0.68, -0.55, 0.265, 1.55); }
@keyframes toast-appear { 0% { opacity: 0; transform: translate(-50%, -50%) scale(0); } 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); } }

.feedback-emoji { font-size: 4rem; display: block; margin-bottom: 8px; filter: drop-shadow(0 4px 10px rgba(0, 0, 0, 0.2)); }

.feedback-text {
  color: #3e2723; font-size: 1.5rem; font-weight: 700;
  text-shadow: 0 1px 6px rgba(255, 215, 0, 0.3);
  background: rgba(255, 255, 255, 0.85);
  padding: 8px 20px; border-radius: 20px;
  backdrop-filter: blur(5px); box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
}

.next-sentence-btn {
  position: absolute; bottom: 3%; right: 5%; z-index: 30;
  background: linear-gradient(135deg, #ffa726, #ff9800);
  color: white; border: none;
  padding: 12px 28px; border-radius: 50px;
  font-size: 1.1rem; font-weight: 700;
  cursor: pointer; transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(255, 152, 0, 0.4);
  animation: options-slide-up 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55) 0.3s both;
}

.next-sentence-btn:hover { transform: translateY(-3px) scale(1.05); box-shadow: 0 8px 25px rgba(255, 152, 0, 0.5); }


/* =============================================================
   GESTURE MODE & CAMERA PANEL
   ============================================================= */
.gesture-mode-badge { position: absolute; bottom: 3%; left: 5%; z-index: 30; display: flex; align-items: center; gap: 8px; }

.gesture-toggle-btn {
  background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px);
  color: #3e2723; border: 2px solid rgba(0, 0, 0, 0.1);
  padding: 8px 16px; border-radius: 20px;
  font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.3s;
}

.gesture-toggle-btn:hover { background: rgba(255, 255, 255, 0.9); border-color: rgba(255, 183, 77, 0.5); }

.gesture-live-indicator {
  background: linear-gradient(135deg, rgba(76, 175, 80, 0.85), rgba(56, 142, 60, 0.85));
  color: white; padding: 6px 14px; border-radius: 20px;
  font-size: 0.85rem; font-weight: 700;
  animation: finger-pulse 0.6s ease-in-out infinite alternate; white-space: nowrap;
}

.gesture-camera-panel {
  position: absolute; top: 8%; left: 2%; width: 280px; z-index: 28;
  animation: options-slide-up 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.gesture-panel {
  background: rgba(255, 255, 255, 0.85); backdrop-filter: blur(12px);
  border-radius: 20px; overflow: hidden;
  border: 2px solid rgba(255, 183, 77, 0.4);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.15), 0 0 15px rgba(255, 215, 0, 0.1);
}

.gesture-panel-standby {
  border-color: rgba(100, 180, 255, 0.3);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.gesture-panel-standby .gesture-camera-feed::after {
  content: '';
  position: absolute;
  inset: 0;
  background: rgba(255, 215, 100, 0.05);
  pointer-events: none;
}

.gesture-panel-inactive { padding: 20px; text-align: center; }
.gesture-panel-status { display: flex; flex-direction: column; align-items: center; gap: 4px; }
.gesture-status-icon { font-size: 2rem; animation: sparkle-twinkle 2s ease-in-out infinite alternate; }
.gesture-status-text { color: #3e2723; font-size: 0.85rem; font-weight: 600; }
.gesture-status-sub { color: rgba(62, 39, 35, 0.5); font-size: 0.7rem; }

.gesture-camera-feed { position: relative; width: 100%; aspect-ratio: 4/3; background: #222; overflow: hidden; }
.gesture-canvas { width: 100%; height: 100%; display: block; object-fit: cover; }

.gesture-finger-badge {
  position: absolute; top: 8px; right: 8px;
  display: flex; align-items: center; gap: 4px;
  padding: 6px 14px; border-radius: 30px; font-weight: 800;
  z-index: 5; transition: all 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.gesture-finger-active {
  background: linear-gradient(135deg, #66bb6a, #43a047); color: white;
  box-shadow: 0 4px 15px rgba(76, 175, 80, 0.5); transform: scale(1.1);
  animation: finger-pulse 0.6s ease-in-out infinite alternate;
}

.gesture-finger-waiting { background: rgba(0, 0, 0, 0.5); color: rgba(255, 255, 255, 0.6); }

@keyframes finger-pulse {
  0% { transform: scale(1.05); box-shadow: 0 4px 15px rgba(76, 175, 80, 0.5); }
  100% { transform: scale(1.15); box-shadow: 0 6px 25px rgba(76, 175, 80, 0.7); }
}

.gesture-finger-count { font-size: 1.4rem; line-height: 1; }
.gesture-finger-label { font-size: 1.1rem; }

.gesture-detect-status { position: absolute; bottom: 0; left: 0; right: 0; text-align: center; padding: 4px 8px; font-size: 0.7rem; font-weight: 600; z-index: 5; }
.gesture-detect-status.detected { background: rgba(76, 175, 80, 0.85); color: white; }
.gesture-detect-status.searching { background: rgba(255, 152, 0, 0.85); color: white; animation: searching-pulse 1.5s ease-in-out infinite; }
.gesture-detect-status.standby { background: rgba(100, 150, 255, 0.75); color: white; }
@keyframes searching-pulse { 0%, 100% { opacity: 0.7; } 50% { opacity: 1; } }

.gesture-finger-guide { display: flex; gap: 2px; padding: 6px 8px; background: rgba(0, 0, 0, 0.05); }

.gesture-guide-item {
  flex: 1; display: flex; flex-direction: column; align-items: center;
  gap: 2px; padding: 4px 2px; border-radius: 8px;
  transition: all 0.3s ease; background: rgba(255, 255, 255, 0.3);
}

.gesture-guide-item.guide-active {
  background: linear-gradient(135deg, rgba(255, 152, 0, 0.6), rgba(255, 87, 34, 0.6));
  transform: scale(1.1); box-shadow: 0 0 12px rgba(255, 152, 0, 0.4);
}

.guide-num {
  color: #3e2723; font-size: 0.75rem; font-weight: 700;
  width: 20px; height: 20px;
  display: flex; align-items: center; justify-content: center;
  background: rgba(0, 0, 0, 0.08); border-radius: 50%;
}

.guide-active .guide-num { background: rgba(255, 255, 255, 0.4); color: white; }
.guide-hand { font-size: 1.1rem; }


/* =============================================================
   LISTEN PHASE & RE-LISTEN
   ============================================================= */
.listen-phase-content {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
  z-index: 20; text-align: center;
  display: flex; flex-direction: column; align-items: center; gap: 16px;
}

.listen-instruction {
  color: #3e2723; font-size: 1.3rem; font-weight: 600;
  text-shadow: 0 1px 8px rgba(255, 215, 0, 0.3);
  background: rgba(255, 255, 255, 0.8);
  padding: 8px 20px; border-radius: 20px;
  backdrop-filter: blur(5px); box-shadow: 0 2px 10px rgba(0, 0, 0, 0.08);
}

.relisten-btn {
  position: absolute; top: 12px; left: 50%; transform: translateX(-50%); z-index: 30;
  background: rgba(255, 255, 255, 0.7); backdrop-filter: blur(10px);
  color: #3e2723; border: 2px solid rgba(0, 0, 0, 0.1);
  padding: 6px 16px; border-radius: 20px;
  font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.3s;
}

.relisten-btn:hover { background: rgba(255, 255, 255, 0.9); border-color: rgba(255, 183, 77, 0.5); }

/* Smooth scrollbar */
.story-speech-bubble::-webkit-scrollbar { width: 6px; }
.story-speech-bubble::-webkit-scrollbar-track { background: transparent; }
.story-speech-bubble::-webkit-scrollbar-thumb { background: rgba(255, 152, 0, 0.3); border-radius: 3px; }


/* =============================================================
   RESPONSIVE
   ============================================================= */
@media (max-width: 768px) {
  .angel-container { left: 3%; bottom: 22%; transform: scale(0.7); }
  .realistic-children-container { right: 2%; transform: scale(0.85); }
  .story-bubble-container { left: 5%; top: 3%; }
  .bubble-story-text { font-size: 0.95rem; }
  .answer-option-card { padding: 8px 6px; }
  .option-text { font-size: 0.85rem; }
  .gesture-camera-panel { width: 200px; top: 5%; left: 1%; }
  .realistic-sun { top: 2%; right: 5%; }
  .sun-core { width: 35px; height: 35px; }
}
